/* ============================================================
   PRINCIPLES OF CHILD DEVELOPMENT — TEST 3 (CONCEPTUAL)
   QUESTIONS: 25
   TIME: 20 MINUTES
   LANGUAGE: ENGLISH ONLY
============================================================ */

// TEST SETTINGS
const TEST_TITLE = "Principles of Child Development – Test 3 (Conceptual)";
const SUBTITLE_TEXT = "Child Development & Pedagogy";
const TOPIC_NAME = "Principles of Child Development";
const TIME_LIMIT_MINUTES = 20;

// QUESTIONS DATA
const quizData = [

{
  q: "A teacher notices that a child can think logically but struggles emotionally. This shows that development",
  a: ["Is uniform in all areas", "Occurs independently in each area", "Is interrelated but not identical", "Depends only on intelligence"],
  correct: 2,
  explanation: "Different areas develop at different rates, though they are interrelated."
},

{
  q: "When a child learns to walk before learning to write, it reflects that development",
  a: ["Is random", "Depends on teaching", "Follows a sequence", "Is based only on practice"],
  correct: 2,
  explanation: "Development follows a definite and predictable sequence."
},

{
  q: "A child who receives poor nutrition but rich emotional support is most likely to show weakness in",
  a: ["Social development", "Physical development", "Language development", "Moral development"],
  correct: 1,
  explanation: "Nutrition directly affects physical growth and health."
},

{
  q: "If a teacher plans different activities for different learners, the teacher is applying the principle of",
  a: ["Uniform development", "Individual differences", "Random growth", "Mechanical learning"],
  correct: 1,
  explanation: "Children differ in abilities and learning pace."
},

{
  q: "A child copies aggressive behaviour after watching violent content. This learning is best explained by",
  a: ["Trial and error theory", "Maturation theory", "Social learning theory", "Insight theory"],
  correct: 2,
  explanation: "Children learn behaviours by observing and imitating models."
},

{
  q: "Which situation best shows that early experiences influence later development?",
  a: ["A child growing taller in adolescence", "A child showing confidence due to early encouragement", "A child learning new facts at school", "A child memorising answers"],
  correct: 1,
  explanation: "Early emotional experiences shape personality and confidence."
},

{
  q: "A teacher expecting all students to learn at the same speed is ignoring the principle of",
  a: ["Continuity", "Maturation", "Individual differences", "Sequential development"],
  correct: 2,
  explanation: "Children differ in learning ability and pace."
},

{
  q: "The idea that development cannot be forced before readiness supports the concept of",
  a: ["Punishment", "Maturation", "Conditioning", "Drill"],
  correct: 1,
  explanation: "Learning depends on the child’s level of maturity."
},

{
  q: "Which classroom practice best supports holistic development?",
  a: ["Only written tests", "Focus only on academics", "Activities for physical, emotional and social growth", "Strict discipline only"],
  correct: 2,
  explanation: "Holistic development involves all areas of growth."
},

{
  q: "A child who can solve problems but cannot cooperate with peers shows imbalance in",
  a: ["Cognitive development", "Social development", "Physical development", "Language development"],
  correct: 1,
  explanation: "Peer interaction is part of social development."
},

{
  q: "If development were not continuous, children would",
  a: ["Develop in sudden jumps", "Stop developing after childhood", "Never change", "Develop identically"],
  correct: 0,
  explanation: "Continuity means development happens gradually, not suddenly."
},

{
  q: "Which observation best reflects qualitative development?",
  a: ["Increase in height", "Increase in weight", "Improvement in reasoning ability", "Growth of muscles"],
  correct: 2,
  explanation: "Reasoning ability reflects qualitative change."
},

{
  q: "A child learning to hold a pencil before writing letters supports the principle of",
  a: ["Cephalocaudal development", "General to specific development", "Uniform development", "Random development"],
  correct: 1,
  explanation: "General skills develop before specific skills."
},

{
  q: "Which factor would most strongly influence a child’s value system?",
  a: ["Height", "Peer group and family", "Reflexes", "Age alone"],
  correct: 1,
  explanation: "Values are shaped by social and family environment."
},

{
  q: "A child from a supportive but poor family performing well academically shows that",
  a: ["Money is unnecessary for development", "Environment always dominates heredity", "Positive environment can support development", "Development is accidental"],
  correct: 2,
  explanation: "Supportive environment promotes healthy development."
},

{
  q: "Which teacher behaviour best respects the principle of individuality?",
  a: ["Using one method for all", "Comparing students publicly", "Providing varied learning opportunities", "Ignoring slow learners"],
  correct: 2,
  explanation: "Different learners need different learning opportunities."
},

{
  q: "Which statement best reflects the relationship between growth and development?",
  a: ["They are unrelated", "Growth causes development only", "Growth supports development", "Development stops growth"],
  correct: 2,
  explanation: "Physical growth supports overall development."
},

{
  q: "A child who talks fluently but lacks emotional control needs support mainly in",
  a: ["Language development", "Emotional development", "Physical development", "Motor development"],
  correct: 1,
  explanation: "Emotional development involves managing feelings and behaviour."
},

{
  q: "Which practice is most harmful to healthy child development?",
  a: ["Encouragement", "Age-appropriate expectations", "Constant comparison with others", "Positive feedback"],
  correct: 2,
  explanation: "Comparison can harm self-esteem and emotional growth."
},

{
  q: "The principle that explains why fine motor skills develop later than gross motor skills is",
  a: ["Proximodistal principle", "Cephalocaudal principle", "General to specific principle", "Continuity principle"],
  correct: 2,
  explanation: "Children first develop large muscle control, then fine motor skills."
},

{
  q: "Which situation best shows the interaction of heredity and environment?",
  a: ["Child growing taller with age", "Child learning language through interaction", "Child born with reflexes", "Child memorising facts"],
  correct: 1,
  explanation: "Language develops through inherited ability and environmental exposure."
},

{
  q: "A teacher allowing children to learn through play is supporting",
  a: ["Mechanical learning", "Natural development", "Punitive discipline", "Rote memorisation"],
  correct: 1,
  explanation: "Play supports natural and meaningful development."
},

{
  q: "Which development helps a child understand right and wrong?",
  a: ["Physical", "Moral", "Cognitive", "Motor"],
  correct: 1,
  explanation: "Moral development involves understanding values and ethics."
},

{
  q: "Expecting abstract thinking from a very young child ignores the principle of",
  a: ["Readiness and maturation", "Continuity", "Individuality", "Social learning"],
  correct: 0,
  explanation: "Abstract thinking requires appropriate cognitive maturity."
},

{
  q: "The main reason teachers should study child development is to",
  a: ["Control classroom behaviour", "Design child-appropriate learning experiences", "Complete syllabus faster", "Increase academic pressure"],
  correct: 1,
  explanation: "Understanding development helps teachers plan suitable teaching strategies."
}

];

/* ============================================================
   END OF ALLOWED SECTION — DO NOT EDIT ANYTHING BELOW
============================================================ */


/* ============================================================
   END OF ALLOWED SECTION — ENGINE CODE IS SKIPPED AS REQUESTED
============================================================ 


      END OF ALLOWED SECTION — DO NOT EDIT ANYTHING BELOW
===============================================================
    ⛔ STOP! DO NOT CHANGE ANY CODE BELOW THIS POINT ⛔
    ⛔ COPY EVERYTHING EXACTLY AS IT IS ⛔
    ⛔ THIS IS THE QUIZ ENGINE + SHUFFLING SYSTEM ⛔

    If you modify anything below, the test WILL BREAK.
    For all future tests: KEEP THIS SECTION EXACTLY SAME.
===============================================================
   COPY EVERYTHING FROM HERE ONWARD WITHOUT CHANGING ANYTHING
============================================================ */

// Shuffle helper function
function shuffleArray(arr){
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

// Set header text
document.getElementById("title").innerText = TEST_TITLE;
document.getElementById("subtitle").innerText = SUBTITLE_TEXT;
document.getElementById("topicName").innerText = TOPIC_NAME;

// Shuffle questions
shuffleArray(quizData);

// Shuffle options inside each question
quizData.forEach(q => {
  const mapped = q.a.map((text, index) => ({ text, index }));
  shuffleArray(mapped);
  q.a = mapped.map(o => o.text);
  q.correct = mapped.findIndex(o => o.index === q.correct);
});

// Engine variables
let current = 0;
const total = quizData.length;
let answers = new Array(total).fill(null);
let totalSeconds = TIME_LIMIT_MINUTES * 60;
let timerInterval = null;

// UI elements
const qEl = document.getElementById('question');
const optsEl = document.getElementById('options');
const qProgress = document.getElementById('qProgress');
const subtle = document.getElementById('subtitle');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const submitBtn = document.getElementById('submitBtn');
const timerDisplay = document.getElementById('timer');
const resultArea = document.getElementById('resultArea');
const reviewArea = document.getElementById('reviewArea');

// Render question
function renderQuestion(index){
  current = index;
  const item = quizData[index];

  qProgress.textContent = `Question ${index + 1} of ${total}`;
  qEl.textContent = item.q;

  optsEl.innerHTML = "";

  item.a.forEach((text,i)=>{
    const id = `opt-${index}-${i}`;
    const wrap = document.createElement("label");
    wrap.className = "opt";
    wrap.innerHTML = `
      <input type="radio" name="option" id="${id}" value="${i}"
      ${answers[index] === i ? "checked" : ""}>
      <div style="flex:1"><strong>${String.fromCharCode(65+i)}.</strong>
      <span>${text}</span></div>
    `;
    wrap.addEventListener("click",()=>{
      answers[index] = i;
      if(index < total - 1) renderQuestion(index + 1);
      else showEndPrompt();
    });
    optsEl.appendChild(wrap);
  });

  prevBtn.disabled = index === 0;
  nextBtn.disabled = index === total - 1;
  submitBtn.style.display = index === total - 1 ? "inline-block" : "none";
}

prevBtn.addEventListener("click",()=>current>0 && renderQuestion(current-1));
nextBtn.addEventListener("click",()=>current<total-1 && renderQuestion(current+1));
submitBtn.addEventListener("click", submitQuiz);

// Last question prompt
function showEndPrompt(){
  resultArea.innerHTML = `
    <div class="result">
      <strong>You reached the last question.</strong>
      <br><button id="finishNow">Submit Test</button>
    </div>`;
  document.getElementById("finishNow").addEventListener("click", submitQuiz);
}

// Timer functions
function startTimer(){
  updateTimer();
  timerInterval = setInterval(()=>{
    totalSeconds--;
    if(totalSeconds < 0){
      clearInterval(timerInterval);
      submitQuiz(true);
    }
    updateTimer();
  },1000);
}
function updateTimer(){
  const m = Math.floor(totalSeconds / 60);
  const s = totalSeconds % 60;
  timerDisplay.textContent =
    `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}

// Submit quiz
function submitQuiz(auto=false){
  if(timerInterval) clearInterval(timerInterval);

  let correctCount = 0;
  quizData.forEach((q,i)=>{
    if(answers[i] === q.correct) correctCount++;
  });

  const incorrect = total - correctCount;
  const percent = ((correctCount / total) * 100).toFixed(2);

  resultArea.innerHTML = `
    <div class="result">
      <h3>${auto ? "⏳ Time Up — Auto Submitted" : "Test Submitted"}</h3>
      <p>Correct: ${correctCount}</p>
      <p>Incorrect: ${incorrect}</p>
      <p><strong>Score: ${percent}%</strong></p>
      <button id="showReviewBtn">Show Detailed Review</button>
    </div>`;
  
  document.getElementById("showReviewBtn").addEventListener("click", showReview);
}

// Review section
function showReview(){
  reviewArea.innerHTML = `<h3>Detailed Review</h3>`;

  quizData.forEach((item,i)=>{
    const user = answers[i];
    const div = document.createElement("div");
    div.className = "item";
    div.style.background = user === item.correct ? "var(--correct)" : "var(--incorrect)";

    div.innerHTML = `
      <strong>Q${i+1}:</strong> ${item.q}<br>
      Your answer: ${user !== null ? item.a[user] : "Not answered"}<br>
      Correct answer: <strong>${item.a[item.correct]}</strong><br>
      <em>Explanation:</em> ${item.explanation}<br><br>
    `;
    reviewArea.appendChild(div);
  });
}

// Start system
renderQuestion(0);
startTimer();
