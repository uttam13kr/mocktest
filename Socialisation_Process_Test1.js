/* ============================================================
   Topic name — Socialisation Process
   QUESTIONS: 25
   TIME: 20 MINUTES
   LANGUAGE: ENGLISH ONLY
============================================================ */

// TEST SETTINGS
const TEST_TITLE = "Socialisation Process – Test 1";
const SUBTITLE_TEXT = "Child Development & Pedagogy";
const TOPIC_NAME = "Socialisation Process";
const TIME_LIMIT_MINUTES = 20;

// QUESTIONS DATA
const quizData = [

{
q: "Socialisation is the process by which an individual",
a: [
"Acquires physical strength",
"Learns to live in society",
"Inherits biological traits",
"Develops intelligence only"
],
correct: 1,
explanation: "Socialisation helps an individual learn social norms, values and behaviour needed to live in society."
},

{
q: "Socialisation begins",
a: [
"At adolescence",
"At school age",
"From birth",
"After maturity"
],
correct: 2,
explanation: "Socialisation starts from birth as the child begins learning through interaction with others."
},

{
q: "Which is the primary agent of socialisation?",
a: [
"School",
"Peer group",
"Family",
"Mass media"
],
correct: 2,
explanation: "Family is the first and most important agent of socialisation in early childhood."
},

{
q: "Primary socialisation mainly takes place in",
a: [
"School",
"Society",
"Family",
"Workplace"
],
correct: 2,
explanation: "Primary socialisation occurs in the family during early childhood."
},

{
q: "Secondary socialisation usually occurs",
a: [
"Before birth",
"Within family only",
"Outside the home",
"Only in old age"
],
correct: 2,
explanation: "Secondary socialisation takes place outside the family through school and society."
},

{
q: "Learning social roles and norms is part of",
a: [
"Maturation",
"Conditioning",
"Socialisation",
"Heredity"
],
correct: 2,
explanation: "Socialisation involves learning social roles, norms and acceptable behaviour."
},

{
q: "Which factor plays a major role in socialisation?",
a: [
"Social interaction",
"Muscle strength",
"Blood group",
"Height"
],
correct: 0,
explanation: "Social interaction helps individuals learn behaviour through contact with others."
},

{
q: "Imitation in socialisation means",
a: [
"Punishing others",
"Copying behaviour of others",
"Rejecting social rules",
"Biological growth"
],
correct: 1,
explanation: "Children imitate others by copying their behaviour, which supports social learning."
},

{
q: "Language is important in socialisation because it",
a: [
"Develops physical strength",
"Transfers culture and values",
"Increases heredity",
"Controls emotions only"
],
correct: 1,
explanation: "Language helps transmit culture, values and ideas from one generation to another."
},

{
q: "Identification in socialisation refers to",
a: [
"Rejecting others",
"Punishing behaviour",
"Developing attachment with others",
"Isolating oneself"
],
correct: 2,
explanation: "Identification helps the child become social by associating with people or objects."
},

{
q: "Which stage of Erikson deals with Trust vs Mistrust?",
a: [
"Early childhood",
"Infancy",
"Adolescence",
"Adulthood"
],
correct: 1,
explanation: "Trust vs Mistrust occurs during infancy when basic needs are fulfilled."
},

{
q: "The stage of Identity vs Role Confusion occurs during",
a: [
"Childhood",
"Adolescence",
"Young adulthood",
"Old age"
],
correct: 1,
explanation: "Adolescence is marked by identity formation and role confusion."
},

{
q: "Peer group influence is strongest during",
a: [
"Infancy",
"Early childhood",
"Adolescence",
"Old age"
],
correct: 2,
explanation: "During adolescence, peers strongly influence behaviour and values."
},

{
q: "Which agent of socialisation provides formal education?",
a: [
"Family",
"Peer group",
"School",
"Community"
],
correct: 2,
explanation: "School provides formal learning and helps children adjust to social rules."
},

{
q: "Mass media as an agent of socialisation mainly",
a: [
"Provides two-way interaction",
"Has no influence",
"Influences behaviour and attitudes",
"Controls heredity"
],
correct: 2,
explanation: "Mass media shapes attitudes and behaviour through information and images."
},

{
q: "Play is important in socialisation because it helps children develop",
a: [
"Only physical growth",
"Creativity and social skills",
"Genetic traits",
"Biological maturity"
],
correct: 1,
explanation: "Play supports creativity, cooperation and social-emotional development."
},

{
q: "Solitary play refers to",
a: [
"Playing in a group with rules",
"Playing alone without others",
"Observing others play",
"Playing cooperative games"
],
correct: 1,
explanation: "In solitary play, the child plays alone without interacting with others."
},

{
q: "Parallel play involves",
a: [
"Children playing together with rules",
"Children playing separately side by side",
"Children playing alone",
"Children observing others"
],
correct: 1,
explanation: "Parallel play means children play near each other but independently."
},

{
q: "Cooperative play is characterised by",
a: [
"No rules or roles",
"Assigned roles and cooperation",
"Playing alone",
"No interaction"
],
correct: 1,
explanation: "Cooperative play involves roles, rules and dependence on others."
},

{
q: "Which stage of Erikson focuses on Industry vs Inferiority?",
a: [
"Preschool stage",
"School age",
"Adolescence",
"Young adulthood"
],
correct: 1,
explanation: "Industry vs Inferiority occurs during school age when skills are developed."
},

{
q: "Socialisation helps an individual to",
a: [
"Live in isolation",
"Reject social norms",
"Adjust to society",
"Control heredity"
],
correct: 2,
explanation: "Socialisation helps individuals adjust and function effectively in society."
},

{
q: "Which agent teaches right and wrong through reward and punishment?",
a: [
"School",
"Peer group",
"Family",
"Mass media"
],
correct: 2,
explanation: "Family teaches moral behaviour through informal methods like reward and punishment."
},

{
q: "Socialisation is best described as",
a: [
"A short-term process",
"A biological process only",
"A lifelong process",
"A school-based process"
],
correct: 2,
explanation: "Socialisation continues throughout life from birth to death."
},

{
q: "Which statement about socialisation is correct?",
a: [
"It ends in childhood",
"It is limited to family",
"It helps personality development",
"It ignores social values"
],
correct: 2,
explanation: "Socialisation plays an important role in shaping personality and behaviour."
},

{
q: "The most important outcome of socialisation is",
a: [
"Physical strength",
"Social adjustment",
"Genetic inheritance",
"Biological growth"
],
correct: 1,
explanation: "Socialisation enables individuals to adjust and live harmoniously in society."
}

];

/* ============================================================
   END OF ALLOWED SECTION — DO NOT EDIT ANYTHING BELOW
============================================================ */

/* ============================================================
   END OF ALLOWED SECTION — ENGINE CODE IS SKIPPED AS REQUESTED
============================================================ */


/* ============================================================
   END OF ALLOWED SECTION — ENGINE CODE IS SKIPPED AS REQUESTED
============================================================ 


      END OF ALLOWED SECTION — DO NOT EDIT ANYTHING BELOW
===============================================================
    ⛔ STOP! DO NOT CHANGE ANY CODE BELOW THIS POINT ⛔
    ⛔ COPY EVERYTHING EXACTLY AS IT IS ⛔
    ⛔ THIS IS THE QUIZ ENGINE + SHUFFLING SYSTEM ⛔

    If you modify anything below, the test WILL BREAK.
    For all future tests: KEEP THIS SECTION EXACTLY SAME.
===============================================================
   COPY EVERYTHING FROM HERE ONWARD WITHOUT CHANGING ANYTHING
============================================================ */

// Shuffle helper function
function shuffleArray(arr){
  for(let i = arr.length - 1; i > 0; i--){
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

// Set header text
document.getElementById("title").innerText = TEST_TITLE;
document.getElementById("subtitle").innerText = SUBTITLE_TEXT;
document.getElementById("topicName").innerText = TOPIC_NAME;

// Shuffle questions
shuffleArray(quizData);

// Shuffle options inside each question
quizData.forEach(q => {
  const mapped = q.a.map((text, index) => ({ text, index }));
  shuffleArray(mapped);
  q.a = mapped.map(o => o.text);
  q.correct = mapped.findIndex(o => o.index === q.correct);
});

// Engine variables
let current = 0;
const total = quizData.length;
let answers = new Array(total).fill(null);
let totalSeconds = TIME_LIMIT_MINUTES * 60;
let timerInterval = null;

// UI elements
const qEl = document.getElementById('question');
const optsEl = document.getElementById('options');
const qProgress = document.getElementById('qProgress');
const subtle = document.getElementById('subtitle');
const prevBtn = document.getElementById('prevBtn');
const nextBtn = document.getElementById('nextBtn');
const submitBtn = document.getElementById('submitBtn');
const timerDisplay = document.getElementById('timer');
const resultArea = document.getElementById('resultArea');
const reviewArea = document.getElementById('reviewArea');

// Render question
function renderQuestion(index){
  current = index;
  const item = quizData[index];

  qProgress.textContent = `Question ${index + 1} of ${total}`;
  qEl.textContent = item.q;

  optsEl.innerHTML = "";

  item.a.forEach((text,i)=>{
    const id = `opt-${index}-${i}`;
    const wrap = document.createElement("label");
    wrap.className = "opt";
    wrap.innerHTML = `
      <input type="radio" name="option" id="${id}" value="${i}"
      ${answers[index] === i ? "checked" : ""}>
      <div style="flex:1"><strong>${String.fromCharCode(65+i)}.</strong>
      <span>${text}</span></div>
    `;
    wrap.addEventListener("click",()=>{
      answers[index] = i;
      if(index < total - 1) renderQuestion(index + 1);
      else showEndPrompt();
    });
    optsEl.appendChild(wrap);
  });

  prevBtn.disabled = index === 0;
  nextBtn.disabled = index === total - 1;
  submitBtn.style.display = index === total - 1 ? "inline-block" : "none";
}

prevBtn.addEventListener("click",()=>current>0 && renderQuestion(current-1));
nextBtn.addEventListener("click",()=>current<total-1 && renderQuestion(current+1));
submitBtn.addEventListener("click", submitQuiz);

// Last question prompt
function showEndPrompt(){
  resultArea.innerHTML = `
    <div class="result">
      <strong>You reached the last question.</strong>
      <br><button id="finishNow">Submit Test</button>
    </div>`;
  document.getElementById("finishNow").addEventListener("click", submitQuiz);
}

// Timer functions
function startTimer(){
  updateTimer();
  timerInterval = setInterval(()=>{
    totalSeconds--;
    if(totalSeconds < 0){
      clearInterval(timerInterval);
      submitQuiz(true);
    }
    updateTimer();
  },1000);
}
function updateTimer(){
  const m = Math.floor(totalSeconds / 60);
  const s = totalSeconds % 60;
  timerDisplay.textContent =
    `${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`;
}

// Submit quiz
function submitQuiz(auto=false){
  if(timerInterval) clearInterval(timerInterval);

  let correctCount = 0;
  quizData.forEach((q,i)=>{
    if(answers[i] === q.correct) correctCount++;
  });

  const incorrect = total - correctCount;
  const percent = ((correctCount / total) * 100).toFixed(2);

  resultArea.innerHTML = `
    <div class="result">
      <h3>${auto ? "⏳ Time Up — Auto Submitted" : "Test Submitted"}</h3>
      <p>Correct: ${correctCount}</p>
      <p>Incorrect: ${incorrect}</p>
      <p><strong>Score: ${percent}%</strong></p>
      <button id="showReviewBtn">Show Detailed Review</button>
    </div>`;
  
  document.getElementById("showReviewBtn").addEventListener("click", showReview);
}

// Review section
function showReview(){
  reviewArea.innerHTML = `<h3>Detailed Review</h3>`;

  quizData.forEach((item,i)=>{
    const user = answers[i];
    const div = document.createElement("div");
    div.className = "item";
    div.style.background = user === item.correct ? "var(--correct)" : "var(--incorrect)";

    div.innerHTML = `
      <strong>Q${i+1}:</strong> ${item.q}<br>
      Your answer: ${user !== null ? item.a[user] : "Not answered"}<br>
      Correct answer: <strong>${item.a[item.correct]}</strong><br>
      <em>Explanation:</em> ${item.explanation}<br><br>
    `;
    reviewArea.appendChild(div);
  });
}

// Start system
renderQuestion(0);
startTimer();

